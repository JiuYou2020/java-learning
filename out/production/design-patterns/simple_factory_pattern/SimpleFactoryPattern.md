# 简单工厂模式

> 当你需要什么，只需要传入一个正确的参数，就可以获取你所需要的对象，而无须知道其创建细节。
>
> 所有的工厂模式都强调一点：两个类A和B之间的关系应该仅仅是A创建B或是A使用B，而不能两种关系都有。将对象的创建和使用分离，也使得系统更加符合单一职责原则，有利于对功能的复用和系统的维护。
>
> 创建对象是具体的，使用对象是抽象的。
>
> 此外，将对象的创建和使用分离还有一个好处：防止用来实例化一个类的数据和代码在多个类中到处都是，可以将有关创建的知识搬移到一个工厂类中
>
> 那么，是否需要为设计中的每一个类都配备一个工厂类？答案是：具体情况具体分析。如果产品类很简单，而且不存在太多变数，其构造过程也很简单，此时无须为其提供工厂类，直接在使用之前实例化即可。例如Java语言中的String类，就无须为它专门提供一个StringFactory。若为每一个类都配备一个工厂类，会导致工厂泛滥，增加系统的复杂度。

## 定义

定义一个工厂类，它可以根据参数的不同返回不同类的实例，被创建的实例通常都具有共同的父类。因为在简单工厂模式中用于创建实例的方法是静态（static）方法，因此简单工厂模式又被称为**静态工厂方法（Static Factory Method）模式**，它属于类创建型模式。

## UML

![image-20240422104958853](/home/code/Java/Project/learning/design-patterns/src/simple_factory_pattern/.gitbook/assets/image-20240422104958853.png)

## 主要优点

1. **工厂类包含必要的判断逻辑，可以决定在什么时候创建哪一个产品类的实例。**客户端可以免除直接创建产品对象的职责，而仅仅“消费”产品。**简单工厂模式实现了对象创建和使用的分离。**
2. 客户端无须知道所创建的具体产品类的类名，**只需要知道具体产品类所对应的参数即可**。对于一些复杂的类名，通过简单工厂模式可以在一定程度减少使用者的记忆量。
3. 通过引入配置文件，可以**在不修改任何客户端代码的情况下更换和增加新的具体产品类**，在一定程度上提高了系统的灵活性。

## 主要缺点

1. 由于工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统都要受到影响。
2. 使用简单工厂模式势必会增加系统中类的个数（引入了新的工厂类），增加了系统的复杂度和理解难度。
3. 系统扩展困难。一旦添加新产品就不得不修改工厂逻辑，在产品类型较多时，有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护。
4. 简单工厂模式由于使用了静态工厂方法，造成工厂角色无法形成基于继承的等级结构。

## 用处

1. **工厂类负责创建的对象比较少。**由于创建的对象较少，不会造成工厂方法中的业务逻辑太过复杂。
2. **客户端只知道传入工厂类的参数，对于如何创建对象并不关心。**

## 简单工厂模式的简化

有时候，为了简化简单工厂模式，可以将抽象产品类和工厂类合并，将静态工厂方法移至抽象产品类中。

![image-20240422115557488](/home/code/Java/Project/learning/design-patterns/src/simple_factory_pattern/.gitbook/assets/image-20240422115557488.png)

客户端可以通过产品父类的静态工厂方法，根据参数的不同创建不同类型的产品子类对象，这种做法在JDK等类库和框架中也广泛存在。
